<ion-header>
  <ion-toolbar>
    <ion-title>Passwort zurücksetzen</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form
    *ngIf="actionCodeChecked"
    (ngSubmit)="resetPassword()"
    [formGroup]="resetpasswordform"
  >
    <ion-item fill="solid" class="ion-margin-bottom">
      <ion-input
        type="password"
        placeholder="Password"
        formControlName="password"
      ></ion-input>
      <ion-note
        slot="error"
        *ngIf="(password.dirty || password.touched) && password.errors"
        >Das Passwort muss mindestens 6 Zeichen lang sein!</ion-note
      >
    </ion-item>

    <ion-item fill="solid" class="ion-margin-bottom">
      <ion-input
        type="password"
        placeholder="Password"
        formControlName="confirmPassword"
      ></ion-input>
      <ion-note
        slot="error"
        *ngIf="(confirmPassword.dirty || confirmPassword.touched) && confirmPassword.errors"
        >Das Passwort muss mit dem oberen übereinstimmen!</ion-note
      >
    </ion-item>

    <ion-button
      [disabled]="!resetpasswordform.valid"
      type="button"
      expand="block"
      color="primary"
      (click)="resetPassword()"
      >Passwort übernehmen</ion-button
    >
  </form>

  <form
    *ngIf="!actionCodeChecked"
    (ngSubmit)="sendResetEmail()"
    [formGroup]="sendresetemailform"
  >
    <ion-item fill="solid" class="ion-margin-bottom">
      <ion-input
        type="email"
        placeholder="Email"
        formControlName="resetEmail"
      ></ion-input>
      <ion-note
        slot="error"
        *ngIf="(resetEmail.dirty || resetEmail.touched) && resetEmail.errors"
        >Bitte geben Sie eine korrekte E-Mail Adresse ein!</ion-note
      >
    </ion-item>
    <ion-button
      [disabled]="!sendresetemailform.valid"
      type="button"
      expand="block"
      color="primary"
      (click)="sendResetEmail()"
      >Link an E-Mail senden</ion-button
    >
    <ion-button expand="block" [routerLink]="['/login']"
    >Du weist dein Passwort noch? Zum Login</ion-button
  >
  </form>
</ion-content>
